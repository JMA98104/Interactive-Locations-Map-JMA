<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Access-Control-Allow-Origin" content="*">
  <meta charset="UTF-8" />
  <title>JMA Project Locations</title>
  
  <!-- ✅ Load Montserrat font correctly -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
 
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      font-family: 'Montserrat', sans-serif;
      background-color: #f4f6f8;
    }

@@ -23,7 +19,6 @@

    .page-header {
      padding: 40px 30px 10px 30px;
      text-align: left;
    }

    .page-header h1 {
@@ -48,30 +43,31 @@
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

     #sidebar {
    #sidebar {
      width: 300px;
      display: flex;
      flex-direction: column;
      padding: 20px;
      background: #f8f9fa;
      border-right: 1px solid #ddd;
}
    }

    #sectorFilters {
      flex: 1;
      overflow-y: auto;
      max-height: 300px;
      margin-bottom: 12px;
}
    }

    #applyFilters {
      margin-top: auto;
}
    }

    #map {
      height: 500px;
      height: 100%;
      width: 100%;
}
    }

    #locationSearch {
      margin-top: 15px;
      width: 100%;
@@ -106,21 +102,19 @@
      background: white;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      max-height: 400px;
      overflow-y: auto;
      position: relative;
      overflow: hidden;
    }

    .project-locations-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      cursor: pointer;
      background: white;
      border-bottom: 1px solid #ddd;
      position: sticky;
      top: 0;
      background: white;
      z-index: 5;
      border-bottom: 1px solid #ddd;
    }

    .project-locations-header h2 {
@@ -140,29 +134,28 @@
      border-bottom: 1px solid #ddd;
    }

    #projectLocationsWrapper {
      padding: 0 20px 20px 20px;
      max-height: 400px;
      overflow-y: auto;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      text-align: left;
      font-size: 16px;
    }

    thead {
      background-color: #f4f6f8;
      position: sticky;
      top: 110px;
      background-color: #f4f6f8;
      z-index: 3;
    }

    th, td {
      padding: 12px 15px;
      border-bottom: 1px solid #ddd;
      text-align: left;
    }

    tbody {
      max-height: 400px;
      overflow-y: auto;
    }

    tr:hover {
@@ -178,28 +171,52 @@
    a.project-link:hover {
      text-decoration: underline;
    }

    .logo-top-right {
      position: absolute;
      top: 20px;
      right: 20px;
      z-index: 1000;
    }

    .logo-top-right img {
      height: 60px;
    }

    .disclaimer {
      background-color:#fff8e1;
      color:#d17b00;
      border:1px solid #ffe0b2;
      padding:12px 16px;
      font-family:Montserrat, sans-serif;
      font-size:14px;
      margin: 16px auto;
      width:90%;
      max-width:900px;
      border-radius:5px;
    }

    .scroll-table-wrapper {
      max-height: 400px;
      overflow-y: auto;
    }
  </style>
</head>

<body>
  <div class="page-wrapper">
    <!-- ✅ Logo in top-right -->
    <div style="position: absolute; top: 20px; right: 20px; z-index: 1000;">
      <img src="JMA%20Square%20Icon%20Logo.official.png" alt="JMA Logo" style="height: 60px;">
    <div class="logo-top-right">
      <img src="JMA%20Square%20Icon%20Logo.official.png" alt="JMA Logo">
    </div>

    <!-- ✅ Page Header -->
    <div class="page-header">
      <h1>Project Locations</h1>
      <p>Explore JMA across various sectors and locations.</p>
    </div>

    <!-- ✅ Disclaimer -->
    <div style="background-color:#fff8e1; color:#d17b00; border:1px solid #ffe0b2; padding:12px 16px; font-family:Montserrat, sans-serif; font-size:14px; margin: 16px auto; width:90%; max-width:900px; border-radius:5px;">
    <div class="disclaimer">
      <strong>Note:</strong> If the map doesn’t appear immediately, please refresh the page. Occasionally, it may take a moment to load due to browser or network settings. Thanks for your patience!
    </div>

    <!-- ✅ Map + Filters -->
    <div class="container">
      <div id="sidebar">
        <h3>Filters</h3>
@@ -210,47 +227,42 @@ <h3>Filters</h3>
      <div id="map"></div>
    </div>

    <!-- ✅ Project Table -->
   <div class="project-locations">
  <div class="project-locations-header">
    <h2>Project Locations</h2>
    <button id="toggleLocations">▲</button>
  </div>
    <div class="project-locations">
      <div class="project-locations-header">
        <h2>Project Locations</h2>
        <button id="toggleLocations">▲</button>
      </div>

  <div id="projectTotal">
    <strong>Total Projects Found:</strong> <span id="totalProjects">0</span>
  </div>
      <div id="projectTotal">
        <strong>Total Projects Found:</strong> <span id="totalProjects">0</span>
      </div>

  <!-- Move the table header OUTSIDE the scroll container -->
  <table style="width: 100%; border-collapse: collapse; table-layout: fixed;">
    <thead style="background-color: #f4f6f8; z-index: 3;">
      <tr>
        <th style="padding: 12px 15px; border-bottom: 1px solid #ddd;">Project Name</th>
        <th style="padding: 12px 15px; border-bottom: 1px solid #ddd;">Sector</th>
        <th style="padding: 12px 15px; border-bottom: 1px solid #ddd;">Projects</th>
      </tr>
    </thead>
  </table>

  <!-- Make only the body scrollable -->
  <div style="max-height: 400px; overflow-y: auto;">
    <table style="width: 100%; border-collapse: collapse; table-layout: fixed;">
      <tbody id="projectLocationsBody">
        <!-- Rows populated by JS -->
      </tbody>
    </table>
      <table>
        <thead>
          <tr>
            <th>Project Name</th>
            <th>Sector</th>
            <th>Projects</th>
          </tr>
        </thead>
      </table>

      <div class="scroll-table-wrapper">
        <table>
          <tbody id="projectLocationsBody"></tbody>
        </table>
      </div>
    </div>
  </div>
</div>

    <!-- Lazy Load Scripts -->
  <!-- Lazy Load Scripts -->
  <script>
    let mapLoaded = false;
    function lazyLoadMap() {
      if (!mapLoaded) {
        mapLoaded = true;

        const gmaps = document.createElement('script');
        gmaps.src = "https://maps.googleapis.com/maps/api/js?key=AIzaSyDIfZAl4HpvdM02gciIlthJBfoV6CnDd2E&callback=initMap";
        gmaps.src = "https://maps.googleapis.com/maps/api/js?key=APIKEYHERE&callback=initMap";
        gmaps.async = true;
        gmaps.defer = true;
        document.head.appendChild(gmaps);
@@ -283,35 +295,16 @@ <h2>Project Locations</h2>
      if (mapEl) observer.observe(mapEl);

      document.getElementById('toggleLocations').addEventListener('click', function () {
        const wrapper = document.getElementById('projectLocationsWrapper');
        if (wrapper.style.display === 'none') {
          wrapper.style.display = 'block';
        const section = document.querySelector('.scroll-table-wrapper');
        if (section.style.display === 'none') {
          section.style.display = 'block';
          this.innerHTML = '▲';
        } else {
          wrapper.style.display = 'none';
          section.style.display = 'none';
          this.innerHTML = '▼';
        }
      });
    });
  </script>
   </body>

</body>
</html>
